# Safe POC E2E

## Description

This is a POC for a gnosis safe E2E testing framework.

## Run

everything is dockerized, so you just need to run:

```bash
./docker-rebuild-and-run.sh
```

if you want to only run again and want to skip rebuilding the image, you can run:

```bash
./docker-run.sh
```

### Run without docker

If you want to run without docker, you can run:

#### Deploying singleton factory
```bash
cd prereq/safe-singleton-factory
npm i
cp .env.sample .env # and fill in the values
npm run compile $CHAIN_ID # where $CHAIN_ID is the chain id you want to deploy to
npm run submit
cd ../../
```

#### Deploying safe
```bash
cd prereq/safe-smart-account
yarn install
cp .env.sample .env # and fill in the values
yarn hh clean --network customnetwork
yarn hh deploy --network customnetwork
yarn hh deploy-proxy --network customnetwork
yarn hh deploy-test-erc20 --network customnetwork
cd ../../
```

This will generate `additional_deployments.json` in your `prereq/safe-smart-account` folder. You need to use those addresses for UI integration

#### Starting UI
```bash
cd ui
yarn install
cp .env.example .env # and fill in the values
yarn start
```

##### JSON Mappings
REACT_APP_ERC20_ADDRESS= `ERC20Token`
REACT_APP_SAFE_ADDRESS= `SafeProxy`
REACT_APP_TREASURY_ADDRESS= `keep it empty or that is 5th address generated by mnemonic`

